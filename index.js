/**
 * qi-nodes 0.0.2
 * http://drkibitz.github.io/qi-nodes/
 * Copyright (c) 2013 Dr. Kibitz, http://drkibitz.com
 * Base implementation for composite patterns in JavaScript.
 * built: Sun Sep 08 2013 19:29:54 GMT-0700 (PDT)
 */
!function(a,b){"use strict";function c(a){this.message=a||"A NodeObject was inserted somewhere it doesn't belong."}function d(a){a.childCount=0,a.firstChild=a.lastChild=a.nextSibling=a.parent=a.previousSibling=a.root=null}function e(a){var b=a.parent,c=a.nextSibling,d=a.previousSibling;return b.childCount--,c?c.previousSibling=d:b.lastChild=d,d?d.nextSibling=c:b.firstChild=c,a.parent=a.nextSibling=a.previousSibling=null,a}function f(a){var b=a.root,c=a.parent?a.parent.root:null;b&&a.onRemoved&&a.onRemoved(b),c&&a.onInserted&&a.onInserted(c),a.root=c}function g(a){d(this),a&&a.append(this)}b["true"]=a,c.prototype=new Error,c.prototype.name="HierarchyRequestError";var h=g.prototype;h.append=function(a){return a.appendTo(this)},h.appendTo=function(a){var b=a.lastChild,d=this;if(d==a)throw new c;return d!=b&&(d.parent&&e(d),d.parent=a,a.childCount++,b&&(d.previousSibling=b,b.nextSibling=d),a.lastChild=d,a.firstChild||(a.firstChild=d),d.root!=a.root&&d.each(f)),d},h.create=function(a){return new g(a)},h.createRoot=function(){var a=new g;return a.root=a,a},h.destroy=function(a,b){return b=b||this,a?b.eachReverse(d):(b.root=null,b.parent&&e(b),b.firstChild&&b.empty()),g.call(this),b},h.each=function i(a,b,c){var d,e;for(b=b||this,c=0|c,d=b.firstChild,a.call(b,b,c);d;)e=d.nextSibling,i(a,d,c+1),d=e;return b},h.eachParent=function j(a,b,c){return b=b||this,c=0|c,b.parent&&j(a,b.parent,c+1),a.call(b,b,c),b},h.eachReverse=function k(a,b,c){var d,e;for(b=b||this,c=0|c,d=b.lastChild;d;)e=d.previousSibling,k(a,d,c+1),d=e;return a.call(b,b,c),b},h.empty=function(a,b){var c,e;for(b=b||this,c=b.firstChild,a&&(b.childCount=0,b.firstChild=b.lastChild=null);c;)e=c.nextSibling,a?c.eachReverse(d):c.remove(),c=e;return b},h.insertAfter=function(a,b){var d,g=a.nextSibling;if(b=b||this,b!=a&&b!=g){if(d=a.parent,!d||b==d)throw new c;b.parent&&e(b),b.previousSibling=a,b.nextSibling=g,b.parent=d,g?g.previousSibling=b:d.lastChild=b,a.nextSibling=b,d.childCount++,b.root!=d.root&&b.each(f)}return b},h.insertBefore=function(a,b){var d,g=a.previousSibling;if(b=b||this,b!=a&&b!=g){if(d=a.parent,!d||b==d)throw new c;b.parent&&e(b),b.previousSibling=g,b.nextSibling=a,b.parent=d,g?g.nextSibling=b:d.firstChild=b,a.previousSibling=b,d.childCount++,b.root!=d.root&&b.each(f)}return b},h.prepend=function(a){return a.prependTo(this)},h.prependTo=function(a){var b=a.firstChild,d=this;if(d==a)throw new c;return d!=b&&(d.parent&&e(d),d.parent=a,a.childCount++,b&&(d.nextSibling=b,b.previousSibling=d),a.firstChild=d,a.lastChild||(a.lastChild=d),d.root!=a.root&&d.each(f)),d},h.remove=function(a){return a=e(a||this),a.root?a.each(f):a},h.swap=function(a,b){var c,d,e,g,h,i=a.nextSibling;return b=b||this,a!=b&&(c=a.parent,d=a.previousSibling,e=b.nextSibling,g=b.parent,h=b.previousSibling,a.nextSibling=e,a.parent=g,a.previousSibling=h,e?e.previousSibling=a:g&&(g.lastChild=a),h?h.nextSibling=a:g&&(g.firstChild=a),b.nextSibling=i,b.parent=c,b.previousSibling=d,i?i.previousSibling=b:c&&(c.lastChild=b),d?d.nextSibling=b:c&&(c.firstChild=b),(a.root&&!g||a.root!=g.root)&&a.each(f),(b.root&&!c||b.root!=c.root)&&b.each(f)),a},a=module.exports=h.createRoot(),a.HierarchyRequestError=c,a.NodeObject=g}({},function(){return this}());