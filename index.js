/**
 * qi-nodes 0.0.3
 * http://drkibitz.github.io/qi-nodes/
 * Copyright (c) 2013 Dr. Kibitz, http://drkibitz.com
 * Base implementation for composite patterns in JavaScript.
 * built: Sun Jan 12 2014 00:07:51 GMT-0800 (PST)
 */
!function(a,b){"use strict";function c(a){this.message=a||"A NodeObject was inserted somewhere it doesn't belong."}function d(a){a.childCount=0,a.firstChild=a.lastChild=a.nextSibling=a.parent=a.previousSibling=a.root=null}function e(a){var b=a.parent,c=a.nextSibling,d=a.previousSibling;return b.childCount--,c?c.previousSibling=d:b.lastChild=d,d?d.nextSibling=c:b.firstChild=c,a.parent=a.nextSibling=a.previousSibling=null,a}function f(a){var b=a.root,c=a.parent?a.parent.root:null;b&&a.onRemoved&&a.onRemoved(b),c&&a.onInserted&&a.onInserted(c),a.root=c}function g(a){d(this),a&&this.appendTo(a)}b["true"]=a,c.prototype=new Error,c.prototype.name="HierarchyRequestError";var h=g.prototype;h.append=function(a,b){return this.appendTo(b||this,a)},h.appendTo=function(a,b){var d,g=a.lastChild;if(b=b||this,b==a)throw new c;return b!=g&&(b.parent&&e(b),b.parent=a,d=0|a.childCount,a.childCount=d+1,g&&(b.previousSibling=g,g.nextSibling=b),a.lastChild=b,a.firstChild||(a.firstChild=b),b.root!=a.root&&this.each(f,b)),b},h.create=function(a){return new g(a)},h.createRoot=function(){var a=new g;return a.root=a,a},h.destroy=function(a,b){return b=b||this,a?this.eachReverse(d,b):(b.root=null,b.parent&&e(b),b.firstChild&&this.empty(a,b)),b},h.each=function i(a,b,c){var d,e;for(b=b||this,c=0|c,d=b.firstChild,a(b,c);d;)e=d.nextSibling,i(a,d,c+1),d=e;return b},h.eachParent=function j(a,b,c){return b=b||this,c=0|c,b.parent&&j(a,b.parent,c+1),a(b,c),b},h.eachReverse=function k(a,b,c){var d,e;for(b=b||this,c=0|c,d=b.lastChild;d;)e=d.previousSibling,k(a,d,c+1),d=e;return a(b,c),b},h.empty=function(a,b){var c,e;for(b=b||this,c=b.firstChild,c&&a&&(b.childCount=0,b.firstChild=b.lastChild=null);c;)e=c.nextSibling,a?this.eachReverse(d,c):this.remove(c),c=e;return b},h.insertAfter=function(a,b){var d,g,h=a.nextSibling;if(b=b||this,b!=a&&b!=h){if(d=a.parent,!d||b==d)throw new c;b.parent&&e(b),b.previousSibling=a,b.nextSibling=h,b.parent=d,h?h.previousSibling=b:d.lastChild=b,a.nextSibling=b,g=0|d.childCount,d.childCount=g+1,b.root!=d.root&&this.each(f,b)}return b},h.insertBefore=function(a,b){var d,g,h=a.previousSibling;if(b=b||this,b!=a&&b!=h){if(d=a.parent,!d||b==d)throw new c;b.parent&&e(b),b.previousSibling=h,b.nextSibling=a,b.parent=d,h?h.nextSibling=b:d.firstChild=b,a.previousSibling=b,g=0|d.childCount,d.childCount=g+1,b.root!=d.root&&this.each(f,b)}return b},h.prepend=function(a,b){return this.prependTo(b||this,a)},h.prependTo=function(a,b){var d,g=a.firstChild;if(b=b||this,b==a)throw new c;return b!=g&&(b.parent&&e(b),b.parent=a,d=0|a.childCount,a.childCount=d+1,g&&(b.nextSibling=g,g.previousSibling=b),a.firstChild=b,a.lastChild||(a.lastChild=b),b.root!=a.root&&this.each(f,b)),b},h.remove=function(a){return a=e(a||this),a.root?this.each(f,a):a},h.swap=function(a,b){var c,d,e,g,h,i=a.nextSibling;return b=b||this,a!=b&&(c=a.parent,d=a.previousSibling,e=b.nextSibling,g=b.parent,h=b.previousSibling,a.nextSibling=e,a.parent=g,a.previousSibling=h,e?e.previousSibling=a:g&&(g.lastChild=a),h?h.nextSibling=a:g&&(g.firstChild=a),b.nextSibling=i,b.parent=c,b.previousSibling=d,i?i.previousSibling=b:c&&(c.lastChild=b),d?d.nextSibling=b:c&&(c.firstChild=b),(a.root&&!g||a.root!=g.root)&&this.each(f,a),(b.root&&!c||b.root!=c.root)&&this.each(f,b)),a},a=module.exports=h.createRoot(),a.HierarchyRequestError=c,a.NodeObject=g}({},function(){return this}());