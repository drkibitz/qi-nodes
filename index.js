/**
 * qi-nodes 1.0.1
 * http://drkibitz.github.io/qi-nodes/
 * Copyright (c) 2013-2017 Dr. Kibitz, http://drkibitz.com
 * Base implementation for composite patterns in JavaScript.
 * built: Thu Mar 16 2017 23:01:11 GMT-0700 (PDT)
 */
!function(i,t){!function(i,t){"use strict";function n(i){this.message=i||"A NodeObject was inserted somewhere it doesn't belong."}function r(i){i.childCount=0,i.firstChild=i.lastChild=i.nextSibling=i.parent=i.previousSibling=i.root=null}function e(i){var t,n,r;return t=i.parent,n=i.nextSibling,r=i.previousSibling,t.childCount--,n?n.previousSibling=r:t.lastChild=r,r?r.nextSibling=n:t.firstChild=n,i.parent=i.nextSibling=i.previousSibling=null,i}function o(i){var t,n;t=i.root,n=i.parent?i.parent.root:null,t&&t.onNodeRemoved&&t.onNodeRemoved(i),n&&n.onNodeInserted&&n.onNodeInserted(i),i.root=n}function l(){}n.prototype=new Error,n.prototype.name="HierarchyRequestError";var h=l.prototype;r(h),h.append=function(i,t){return this.appendTo(t||this,i)},h.appendTo=function(i,t){var r,l;if(r=i.lastChild,(t=t||this)==i)throw new n;return t!=r&&(t.parent&&e(t),t.parent=i,l=0|i.childCount,i.childCount=l+1,r&&(t.previousSibling=r,r.nextSibling=t),i.lastChild=t,i.firstChild||(i.firstChild=t),t.root!=i.root&&this.eachChildFrom(o,t)),t},h.create=function(i){var t=new this.constructor;return i&&t.appendTo(i),t},h.createRoot=function(){var i=this.create();return i.root=i,i},h.destroy=function(i,t){return t=t||this,i?this.eachChildTo(r,t):(t.root=null,t.parent&&e(t),t.firstChild&&this.empty(i,t)),t},h.eachChildFrom=function i(t,n,r,e){var o,l;for(n=n||this,r=r||n,e|=0,o=n.firstChild,t.call(r,n,e);o;)l=o.nextSibling,i(t,o,r,e+1),o=l;return n},h.eachChildTo=function i(t,n,r,e){var o,l;for(n=n||this,r=r||n,e|=0,o=n.lastChild;o;)l=o.previousSibling,i(t,o,r,e+1),o=l;return t.call(r,n,e),n},h.eachParentTo=function i(t,n,r,e){return n=n||this,r=r||n,e|=0,n.parent&&i(t,n.parent,r,e+1),t.call(r,n,e),n},h.eachParentFrom=function i(t,n,r,e){return n=n||this,r=r||n,e|=0,t.call(r,n,e),n.parent&&i(t,n.parent,r,e+1),n},h.empty=function(i,t){var n,e;for(t=t||this,n=t.firstChild,n&&i&&(t.childCount=0,t.firstChild=t.lastChild=null);n;)e=n.nextSibling,i?this.eachChildTo(r,n):this.remove(n),n=e;return t},h.insertAfter=function(i,t){var r,l,h;if(r=i.nextSibling,(t=t||this)!=i&&t!=r){if(!(l=i.parent)||t==l)throw new n;t.parent&&e(t),t.previousSibling=i,t.nextSibling=r,t.parent=l,r?r.previousSibling=t:l.lastChild=t,i.nextSibling=t,h=0|l.childCount,l.childCount=h+1,t.root!=l.root&&this.eachChildFrom(o,t)}return t},h.insertBefore=function(i,t){var r,l,h;if(r=i.previousSibling,(t=t||this)!=i&&t!=r){if(!(l=i.parent)||t==l)throw new n;t.parent&&e(t),t.previousSibling=r,t.nextSibling=i,t.parent=l,r?r.nextSibling=t:l.firstChild=t,i.previousSibling=t,h=0|l.childCount,l.childCount=h+1,t.root!=l.root&&this.eachChildFrom(o,t)}return t},h.prepend=function(i,t){return this.prependTo(t||this,i)},h.prependTo=function(i,t){var r,l;if(r=i.firstChild,(t=t||this)==i)throw new n;return t!=r&&(t.parent&&e(t),t.parent=i,l=0|i.childCount,i.childCount=l+1,r&&(t.nextSibling=r,r.previousSibling=t),i.firstChild=t,i.lastChild||(i.lastChild=t),t.root!=i.root&&this.eachChildFrom(o,t)),t},h.remove=function(i){return i=e(i||this),i.root?this.eachChildFrom(o,i):i},h.swap=function(i,t){var n,r,e,l,h,s;return n=i.nextSibling,t=t||this,i!=t&&(r=i.parent,e=i.previousSibling,l=t.nextSibling,h=t.parent,s=t.previousSibling,i.nextSibling=l,i.parent=h,i.previousSibling=s,l?l.previousSibling=i:h&&(h.lastChild=i),s?s.nextSibling=i:h&&(h.firstChild=i),t.nextSibling=n,t.parent=r,t.previousSibling=e,n?n.previousSibling=t:r&&(r.lastChild=t),e?e.nextSibling=t:r&&(r.firstChild=t),(i.root&&!h||i.root!=h.root)&&this.eachChildFrom(o,i),(t.root&&!r||t.root!=r.root)&&this.eachChildFrom(o,t)),i},t=i.exports=h.createRoot(),t.HierarchyRequestError=n,t.NodeObject=l}(module,i),t.nodes=i}({},function(){return this}());