/**
 * qi-nodes 0.0.5
 * http://drkibitz.github.io/qi-nodes/
 * Copyright (c) 2013-2015 Dr. Kibitz, http://drkibitz.com
 * Base implementation for composite patterns in JavaScript.
 * built: Sat Mar 14 2015 13:30:35 GMT-0700 (PDT)
 */
!function(i,t){"use strict";function n(i){this.message=i||"A NodeObject was inserted somewhere it doesn't belong."}function r(i){i.childCount=0,i.firstChild=i.lastChild=i.nextSibling=i.parent=i.previousSibling=i.root=null}function e(i){var t,n,r;return t=i.parent,n=i.nextSibling,r=i.previousSibling,t.childCount--,n?n.previousSibling=r:t.lastChild=r,r?r.nextSibling=n:t.firstChild=n,i.parent=i.nextSibling=i.previousSibling=null,i}function o(i){var t,n;t=i.root,n=i.parent?i.parent.root:null,t&&i.onRemoved&&i.onRemoved(t),n&&i.onInserted&&i.onInserted(n),i.root=n}function l(){}n.prototype=new Error,n.prototype.name="HierarchyRequestError";var s=l.prototype;r(s),s.append=function(i,t){return this.appendTo(t||this,i)},s.appendTo=function(i,t){var r,l;if(r=i.lastChild,t=t||this,t==i)throw new n;return t!=r&&(t.parent&&e(t),t.parent=i,l=0|i.childCount,i.childCount=l+1,r&&(t.previousSibling=r,r.nextSibling=t),i.lastChild=t,i.firstChild||(i.firstChild=t),t.root!=i.root&&this.each(o,t)),t},s.create=function(i){var t=new this.constructor;return i&&t.appendTo(i),t},s.createRoot=function(){var i=this.create();return i.root=i,i},s.destroy=function(i,t){return t=t||this,i?this.eachReverse(r,t):(t.root=null,t.parent&&e(t),t.firstChild&&this.empty(i,t)),t},s.each=function h(i,t,n){var r,e;for(t=t||this,n=0|n,r=t.firstChild,i(t,n);r;)e=r.nextSibling,h(i,r,n+1),r=e;return t},s.eachParent=function u(i,t,n){return t=t||this,n=0|n,t.parent&&u(i,t.parent,n+1),i(t,n),t},s.eachReverse=function a(i,t,n){var r,e;for(t=t||this,n=0|n,r=t.lastChild;r;)e=r.previousSibling,a(i,r,n+1),r=e;return i(t,n),t},s.empty=function(i,t){var n,e;for(t=t||this,n=t.firstChild,n&&i&&(t.childCount=0,t.firstChild=t.lastChild=null);n;)e=n.nextSibling,i?this.eachReverse(r,n):this.remove(n),n=e;return t},s.insertAfter=function(i,t){var r,l,s;if(r=i.nextSibling,t=t||this,t!=i&&t!=r){if(l=i.parent,!l||t==l)throw new n;t.parent&&e(t),t.previousSibling=i,t.nextSibling=r,t.parent=l,r?r.previousSibling=t:l.lastChild=t,i.nextSibling=t,s=0|l.childCount,l.childCount=s+1,t.root!=l.root&&this.each(o,t)}return t},s.insertBefore=function(i,t){var r,l,s;if(r=i.previousSibling,t=t||this,t!=i&&t!=r){if(l=i.parent,!l||t==l)throw new n;t.parent&&e(t),t.previousSibling=r,t.nextSibling=i,t.parent=l,r?r.nextSibling=t:l.firstChild=t,i.previousSibling=t,s=0|l.childCount,l.childCount=s+1,t.root!=l.root&&this.each(o,t)}return t},s.prepend=function(i,t){return this.prependTo(t||this,i)},s.prependTo=function(i,t){var r,l;if(r=i.firstChild,t=t||this,t==i)throw new n;return t!=r&&(t.parent&&e(t),t.parent=i,l=0|i.childCount,i.childCount=l+1,r&&(t.nextSibling=r,r.previousSibling=t),i.firstChild=t,i.lastChild||(i.lastChild=t),t.root!=i.root&&this.each(o,t)),t},s.remove=function(i){return i=e(i||this),i.root?this.each(o,i):i},s.swap=function(i,t){var n,r,e,l,s,h;return n=i.nextSibling,t=t||this,i!=t&&(r=i.parent,e=i.previousSibling,l=t.nextSibling,s=t.parent,h=t.previousSibling,i.nextSibling=l,i.parent=s,i.previousSibling=h,l?l.previousSibling=i:s&&(s.lastChild=i),h?h.nextSibling=i:s&&(s.firstChild=i),t.nextSibling=n,t.parent=r,t.previousSibling=e,n?n.previousSibling=t:r&&(r.lastChild=t),e?e.nextSibling=t:r&&(r.firstChild=t),(i.root&&!s||i.root!=s.root)&&this.each(o,i),(t.root&&!r||t.root!=r.root)&&this.each(o,t)),i},t=i.exports=s.createRoot(),t.HierarchyRequestError=n,t.NodeObject=l}(module,exports);